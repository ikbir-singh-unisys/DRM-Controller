import{d as y,e as j,j as e,L as r,B as f}from"./index-DQATgoiV.js";import{u as k,o as L,c as _,a as l,F as m}from"./FormInput-CB43Dy5u.js";import{F as d}from"./index-DA_P0STp.js";import{b}from"./Urls-JdHTyFtR.js";import{V as N}from"./VerticalForm-C3TUZqbY.js";import{u as I,A as C}from"./AuthLayout-CfgPmTGZ.js";import{l as v,a as w}from"./logo-light-CegqmrQC.js";import"./_baseIteratee-EuSwe7X_.js";import"./InputGroup-CUTXQIxf.js";import"./InputGroupContext-D0VcQIVB.js";import"./slicedToArray-BWHeaqf0.js";import"./unsupportedIterableToArray-CxZjG5kp.js";const V=()=>{const{t:s}=I(),{showNotification:a}=y(),{saveSession:g}=j(),{control:h,loading:x}=k(),u=L(_().shape({client_id:l().required(s("Please enter Client ID")),license_key:l().required(s("Please enter License Key"))})),p=async n=>{const t={client_id:n.client_id,license_key:n.license_key};try{const o=await fetch(`${b}/auth/token`,{method:"POST",headers:{"Content-Type":"application/json",x_client_id:"admin",x_license_key:"admin-key"},body:JSON.stringify(t)}),i=await o.json();if(o.ok){const c=i.access_token;localStorage.setItem("token",c),localStorage.setItem("x-client-id",t==null?void 0:t.client_id),localStorage.setItem("x-license-key",t==null?void 0:t.license_key),g({response:{data:{token:c},message:"Login successful"}}),a({message:"Login successful",variant:"success"}),window.location.href="/"}else a({message:i.detail||"Login failed",variant:"danger"})}catch(o){console.error("Login error:",o),a({message:"Something went wrong",variant:"danger"})}};return e.jsx(e.Fragment,{children:e.jsxs(C,{children:[" ",e.jsxs("div",{className:"auth-logo mx-auto",children:[e.jsx(r,{to:"/",className:"logo logo-dark text-center",children:e.jsx("span",{className:"logo-lg",children:e.jsx("img",{src:v,alt:"",height:"24"})})}),e.jsx(r,{to:"/",className:"logo logo-light text-center",children:e.jsx("span",{className:"logo-lg",children:e.jsx("img",{src:w,alt:"",height:"24"})})})]}),e.jsx("h6",{className:"h5 mb-0 mt-3",children:s("Welcome back!")}),e.jsx("p",{className:"text-muted mt-1 mb-4",children:s("Enter your Client ID and License Key to access admin panel.")}),e.jsxs(N,{onSubmit:p,resolver:u,formClass:"authentication-form",children:[e.jsx(m,{type:"email",name:"client_id",control:h,label:s("Clinet ID"),startIcon:e.jsx(d,{icon:"mail",className:"icon-dual"}),placeholder:s("Client ID"),containerClass:"mb-3"}),e.jsx(m,{type:"password",name:"license_key",label:s("License Key"),startIcon:e.jsx(d,{icon:"lock",className:"icon-dual"}),placeholder:s("Enter your License Key"),containerClass:"mb-3"}),e.jsx("div",{className:"mb-3 text-center d-grid",children:e.jsx(f,{type:"submit",children:s(x?"Logging In...":"Log In")})})]})]})})};export{V as default};
