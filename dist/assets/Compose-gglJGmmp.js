import{q as z,p as V,r as y,j as c,f as W,C as $,L as J,B as T}from"./index-kH_MM8uZ.js";import{o as Q,c as X,a as A,F as j}from"./FormInput-CE15v1BK.js";import{h as tt,D as L,r as et}from"./react-draft-wysiwyg-Bcws-T5_.js";import{V as rt}from"./VerticalForm-Z58an5Ww.js";import{P as at}from"./PageTitle-D1X1oCzo.js";import{e as nt,L as it}from"./data-XQa77_XG.js";import"./_baseIteratee-diiLj1hK.js";import"./InputGroup-wT9qnrvz.js";import"./InputGroupContext-CQXtZeHT.js";import"./Scrollbar-C1Wm6pFq.js";import"./index-BRQ7nW5x.js";import"./avatar-1-BMXE0ycC.js";import"./avatar-2-Dcl2IFJj.js";import"./avatar-6-DZPbOOwP.js";import"./Dropdown-DgWscwN8.js";import"./hook-BGu0KHPR.js";import"./extends-Ddkkjl9d.js";import"./useForceUpdate-BfUUU7hG.js";import"./mergeOptionsWithPopperConfig-Dcco-Ch-.js";import"./warning-jkIVRgjP.js";import"./SSRProvider-CCZsMxV0.js";import"./NavbarContext-D8qaAC9u.js";import"./avatar-4-DQ7kceu6.js";var F={exports:{}};(function(v,E){(function(p,d){v.exports=d()})(z,function(){function p(t,e){if(t)for(var r in t)({}).hasOwnProperty.call(t,r)&&e(r,t[r])}function d(t){return t==null||t.length===0||t.trim().length===0}var R={unstyled:"p","header-one":"h1","header-two":"h2","header-three":"h3","header-four":"h4","header-five":"h5","header-six":"h6","unordered-list-item":"ul","ordered-list-item":"ol",blockquote:"blockquote",code:"pre"};function h(t){return t&&R[t]}function l(t){var e="";return p(t,function(r,i){i&&(e+="".concat(r,":").concat(i,";"))}),e}function m(t,e){var r=[];if(e){for(var i=0,a=0,n=t,o=e.trigger||"#",s=e.separator||" ";n.length>0&&a>=0;)if(n[0]===o?(a=0,i=0,n=n.substr(o.length)):(a=n.indexOf(s+o),a>=0&&(n=n.substr(a+(s+o).length),i+=a+s.length)),a>=0){var u=n.indexOf(s)>=0?n.indexOf(s):n.length,f=n.substr(0,u);f&&f.length>0&&r.push({offset:i,length:f.length+o.length,type:"HASHTAG"}),i+=o.length}}return r}function I(t,e){var r=[],i=0,a=t.entityRanges.map(function(n){var o=n.offset,s=n.length,u=n.key;return{offset:o,length:s,key:u,type:"ENTITY"}});return a=a.concat(m(t.text,e)),a=a.sort(function(n,o){return n.offset-o.offset}),a.forEach(function(n){n.offset>i&&r.push({start:i,end:n.offset}),r.push({start:n.offset,end:n.offset+n.length,entityKey:n.key,type:n.type}),i=n.offset+n.length}),i<t.text.length&&r.push({start:i,end:t.text.length}),r}function x(t){return!!(t.entityRanges.length>0&&(d(t.text)||t.type==="atomic"))}function w(t){var e=t.text,r=t.inlineStyleRanges,i={BOLD:new Array(e.length),ITALIC:new Array(e.length),UNDERLINE:new Array(e.length),STRIKETHROUGH:new Array(e.length),CODE:new Array(e.length),SUPERSCRIPT:new Array(e.length),SUBSCRIPT:new Array(e.length),COLOR:new Array(e.length),BGCOLOR:new Array(e.length),FONTSIZE:new Array(e.length),FONTFAMILY:new Array(e.length),length:e.length};return r&&r.length>0&&r.forEach(function(a){for(var n=a.offset,o=n+a.length,s=n;s<o;s+=1)a.style.indexOf("color-")===0?i.COLOR[s]=a.style.substring(6):a.style.indexOf("bgcolor-")===0?i.BGCOLOR[s]=a.style.substring(8):a.style.indexOf("fontsize-")===0?i.FONTSIZE[s]=a.style.substring(9):a.style.indexOf("fontfamily-")===0?i.FONTFAMILY[s]=a.style.substring(11):i[a.style]&&(i[a.style][s]=!0)}),i}function B(t,e){var r={};return t.COLOR[e]&&(r.COLOR=t.COLOR[e]),t.BGCOLOR[e]&&(r.BGCOLOR=t.BGCOLOR[e]),t.FONTSIZE[e]&&(r.FONTSIZE=t.FONTSIZE[e]),t.FONTFAMILY[e]&&(r.FONTFAMILY=t.FONTFAMILY[e]),t.UNDERLINE[e]&&(r.UNDERLINE=!0),t.ITALIC[e]&&(r.ITALIC=!0),t.BOLD[e]&&(r.BOLD=!0),t.STRIKETHROUGH[e]&&(r.STRIKETHROUGH=!0),t.CODE[e]&&(r.CODE=!0),t.SUBSCRIPT[e]&&(r.SUBSCRIPT=!0),t.SUPERSCRIPT[e]&&(r.SUPERSCRIPT=!0),r}function b(t,e,r){var i=!0;return r>0&&r<t.length?e.forEach(function(a){i=i&&t[a][r]===t[a][r-1]}):i=!1,i}function D(t,e){return t==="BOLD"?"<strong>".concat(e,"</strong>"):t==="ITALIC"?"<em>".concat(e,"</em>"):t==="UNDERLINE"?"<ins>".concat(e,"</ins>"):t==="STRIKETHROUGH"?"<del>".concat(e,"</del>"):t==="CODE"?"<code>".concat(e,"</code>"):t==="SUPERSCRIPT"?"<sup>".concat(e,"</sup>"):t==="SUBSCRIPT"?"<sub>".concat(e,"</sub>"):e}function H(t){if(t&&t.length>0){var e=t.map(function(r){switch(r){case`
`:return"<br>";case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";default:return r}});return e.join("")}return""}function P(t,e){if(t&&(t.COLOR||t.BGCOLOR||t.FONTSIZE||t.FONTFAMILY)){var r='style="';return t.COLOR&&(r+="color: ".concat(t.COLOR,";")),t.BGCOLOR&&(r+="background-color: ".concat(t.BGCOLOR,";")),t.FONTSIZE&&(r+="font-size: ".concat(t.FONTSIZE).concat(/^\d+$/.test(t.FONTSIZE)?"px":"",";")),t.FONTFAMILY&&(r+="font-family: ".concat(t.FONTFAMILY,";")),r+='"',"<span ".concat(r,">").concat(e,"</span>")}return e}function N(t,e,r,i){var a=t[e];if(typeof i=="function"){var n=i(a,r);if(n)return n}if(a.type==="MENTION")return'<a href="'.concat(a.data.url,'" class="wysiwyg-mention" data-mention data-value="').concat(a.data.value,'">').concat(r,"</a>");if(a.type==="LINK"){var o=a.data.targetOption||"_self";return'<a href="'.concat(a.data.url,'" target="').concat(o,'">').concat(r,"</a>")}if(a.type==="IMAGE"){var s=a.data.alignment;return s&&s.length?'<div style="text-align:'.concat(s,';"><img src="').concat(a.data.src,'" alt="').concat(a.data.alt,'" style="height: ').concat(a.data.height,";width: ").concat(a.data.width,'"/></div>'):'<img src="'.concat(a.data.src,'" alt="').concat(a.data.alt,'" style="height: ').concat(a.data.height,";width: ").concat(a.data.width,'"/>')}return a.type==="EMBEDDED_LINK"?'<iframe width="'.concat(a.data.width,'" height="').concat(a.data.height,'" src="').concat(a.data.src,'" frameBorder="0"></iframe>'):r}function C(t,e,r,i){var a=[],n=Array.from(t.text);if(n.length>0)for(var o=w(t),s,u=r;u<i;u+=1)u!==r&&b(o,e,u)?(s.text.push(n[u]),s.end=u+1):(s={styles:B(o,u),text:[n[u]],start:u,end:u+1},a.push(s));return a}function U(t){if(t){for(var e=t,r=0;r<e.length&&t[r]===" ";r+=1)e=e.replace(" ","&nbsp;");return e}return t}function M(t){if(t){for(var e=t,r=e.length-1;r>=0&&e[r]===" ";r-=1)e="".concat(e.substring(0,r),"&nbsp;").concat(e.substring(r+1));return e}return t}function G(t){var e=t.styles,r=t.text,i=H(r);return p(e,function(a,n){i=D(a,i)}),i}function Z(t,e){var r=C(t,["BOLD","ITALIC","UNDERLINE","STRIKETHROUGH","CODE","SUPERSCRIPT","SUBSCRIPT"],e.start,e.end),i="";return r.forEach(function(a){i+=G(a)}),i=P(e.styles,i),i}function K(t,e,r,i){var a=[],n=C(t,["COLOR","BGCOLOR","FONTSIZE","FONTFAMILY"],r.start,r.end);n.forEach(function(s){a.push(Z(t,s))});var o=a.join("");return r.type==="ENTITY"?r.entityKey!==void 0&&r.entityKey!==null&&(o=N(e,r.entityKey,o,i)):r.type==="HASHTAG"&&(o='<a href="'.concat(o,'" class="wysiwyg-hashtag">').concat(o,"</a>")),o}function S(t,e,r,i){var a=[],n=I(t,r);return n.forEach(function(o,s){var u=K(t,e,o,i);s===0&&(u=U(u)),s===n.length-1&&(u=M(u)),a.push(u)}),a.join("")}function Y(t,e,r,i,a){var n=[];if(x(t))n.push(N(e,t.entityRanges[0].key,void 0,a));else{var o=h(t.type);if(o){n.push("<".concat(o));var s=l(t.data);s&&n.push(' style="'.concat(s,'"')),i&&n.push(' dir = "auto"'),n.push(">"),n.push(S(t,e,r,a)),n.push("</".concat(o,">"))}}return n.push(`
`),n.join("")}function q(t){return t==="unordered-list-item"||t==="ordered-list-item"}function O(t,e,r,i,a){var n=[],o=[],s;return t.forEach(function(u){var f=!1;if(s?s.type!==u.type?(n.push("</".concat(h(s.type),`>
`)),n.push("<".concat(h(u.type),`>
`))):s.depth===u.depth?o&&o.length>0&&(n.push(O(o,e,r,i,a)),o=[]):(f=!0,o.push(u)):n.push("<".concat(h(u.type),`>
`)),!f){n.push("<li");var g=l(u.data);g&&n.push(' style="'.concat(g,'"')),i&&n.push(' dir = "auto"'),n.push(">"),n.push(S(u,e,r,a)),n.push(`</li>
`),s=u}}),o&&o.length>0&&n.push(O(o,e,r,i,a)),n.push("</".concat(h(s.type),`>
`)),n.join("")}function _(t,e,r,i){var a=[];if(t){var n=t.blocks,o=t.entityMap;if(n&&n.length>0){var s=[];if(n.forEach(function(f){if(q(f.type))s.push(f);else{if(s.length>0){var g=O(s,o,e,i);a.push(g),s=[]}var k=Y(f,o,e,r,i);a.push(k)}}),s.length>0){var u=O(s,o,e,r,i);a.push(u),s=[]}}}return a.join("")}return _})})(F);var st=F.exports;const ot=V(st),xt=()=>{const[v,E]=y.useState(),[p]=y.useState(nt.filter(l=>l.is_read===!1).length);y.useEffect(()=>{const m=tt(`<h3>This is an Air-mode editable area.</h3>
            <ul> 
                <li>Select a text to reveal the toolbar.</li>
                <li>Edit rich document on-the-fly, so elastic!</li>
            </ul>
            <p>End of air-mode area</p>`);if(m){const I=L.ContentState.createFromBlockArray(m.contentBlocks);E(L.EditorState.createWithContent(I))}},[]);const d=Q(X().shape({to:A().required("Please specify to email"),subject:A().required("Please specify subject")})),R=(l,m)=>{ot(L.convertToRaw(v.getCurrentContent()))},h=l=>{E(l)};return c.jsxs(c.Fragment,{children:[c.jsx(at,{breadCrumbItems:[{label:"Email",path:"/apps/email/compose"},{label:"Compose Email",path:"/apps/email/compose",active:!0}],title:"Compose Email"}),c.jsx(W,{children:c.jsx($,{children:c.jsxs("div",{className:"email-container",children:[c.jsxs("div",{className:"inbox-leftbar",children:[c.jsx(J,{to:"/apps/email/inbox",className:"btn btn-danger d-block",children:"Inbox"}),c.jsx(it,{showChatDetails:!1,totalUnreadEmails:p})]}),c.jsx("div",{className:"inbox-rightbar p-4",children:c.jsx("div",{children:c.jsxs(rt,{onSubmit:R,resolver:d,children:[c.jsx(j,{type:"email",name:"to",placeholder:"To",containerClass:"mb-3"}),c.jsx(j,{type:"text",name:"subject",placeholder:"Subject",containerClass:"mb-3"}),c.jsx("div",{className:"mb-3 card border-0",children:c.jsx(et.Editor,{editorState:v,toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName border border-1 border-soft-dark mb-3 card",editorClassName:"editorClassName px-2 pt-0",editorStyle:{minHeight:"300px"},onEditorStateChange:h})}),c.jsx("div",{className:"mb-3 pt-2",children:c.jsxs("div",{className:"text-end",children:[c.jsxs(T,{variant:"success",className:"me-1",children:[c.jsx("i",{className:"uil uil-envelope-edit"})," Draft"]}),c.jsxs(T,{type:"submit",children:[" ",c.jsx("span",{children:"Send"}),c.jsx("i",{className:"uil uil-message ms-2"})]})]})})]})})}),c.jsx("div",{className:"clearfix"})]})})})]})};export{xt as default};
