import{q as O,p as H,r as g,w as T,v as _,j as s,n as I}from"./index-DQATgoiV.js";import{d}from"./dayjs.min-Cgo_TCfL.js";import{b as U}from"./Urls-JdHTyFtR.js";var w={exports:{}};(function(a,D){(function(o,n){a.exports=n()})(O,function(){var o="minute",n=/[+-]\d\d(?::?\d\d)?/g,u=/([+-]|\d\d)/g;return function(j,f,r){var t=f.prototype;r.utc=function(e){var i={date:e,utc:!0,args:arguments};return new f(i)},t.utc=function(e){var i=r(this.toDate(),{locale:this.$L,utc:!0});return e?i.add(this.utcOffset(),o):i},t.local=function(){return r(this.toDate(),{locale:this.$L,utc:!1})};var b=t.parse;t.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),b.call(this,e)};var c=t.init;t.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else c.call(this)};var x=t.utcOffset;t.utcOffset=function(e,i){var h=this.$utils().u;if(h(e))return this.$u?0:h(this.$offset)?x.call(this):this.$offset;if(typeof e=="string"&&(e=function(N){N===void 0&&(N="");var S=N.match(n);if(!S)return null;var p=(""+S[0]).match(u)||["-",0,0],M=p[0],$=60*+p[1]+ +p[2];return $===0?0:M==="+"?$:-$}(e),e===null))return this;var m=Math.abs(e)<=16?60*e:e,l=this;if(i)return l.$offset=m,l.$u=e===0,l;if(e!==0){var Y=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(l=this.local().add(m+Y,o)).$offset=m,l.$x.$localOffset=Y}else l=this.utc();return l};var v=t.format;t.format=function(e){var i=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return v.call(this,i)},t.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},t.isUTC=function(){return!!this.$u},t.toISOString=function(){return this.toDate().toISOString()},t.toString=function(){return this.toDate().toUTCString()};var C=t.toDate;t.toDate=function(e){return e==="s"&&this.$offset?r(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():C.call(this)};var y=t.diff;t.diff=function(e,i,h){if(e&&this.$u===e.$u)return y.call(this,e,i,h);var m=this.local(),l=r(e).local();return y.call(m,l,i,h)}}})})(w);var J=w.exports;const R=H(J);d.extend(R);const F=()=>{const[a,D]=g.useState(null),[o,n]=g.useState(!1),{jobId:u}=T(),j=_(),f=localStorage.getItem("x-client-id"),r=localStorage.getItem("x-license-key"),t=async()=>{try{n(!0);const c=await I.get(`${U}/api/job/${u}`,{headers:{x_client_id:f,x_license_key:r}});D(c.data)}catch(c){console.error("Failed to fetch job details:",c),j("/job-list")}finally{n(!1)}};g.useEffect(()=>{t()},[u]);const b=(c,x)=>{if(!c||!x)return"00:00:00";const v=d(x).diff(d(c));return d.utc(v).format("HH:mm:ss")};return a?s.jsxs("div",{className:"container-fluid mt-4 py-4",children:[s.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[s.jsx("h3",{className:"mb-0",children:"Job Summary"}),s.jsxs("div",{children:[s.jsx("button",{className:"btn btn-outline-primary rounded-pill me-2",onClick:()=>t(),disabled:o,children:"Refresh"}),s.jsx("button",{className:"btn btn-outline-secondary rounded-pill",onClick:()=>j("/job-list"),children:"Back to Jobs"})]})]}),s.jsxs("div",{className:"card shadow-sm mb-4",style:{borderRadius:"20px"},children:[s.jsx("div",{className:"card-header",children:s.jsx("h5",{className:"mb-0",children:"Overview"})}),s.jsxs("div",{className:"card-body d-flex flex-wrap",children:[s.jsx("div",{className:"flex-fill pe-4",children:s.jsxs("dl",{className:"row",children:[s.jsx("dt",{className:"col-sm-4",children:"Job ID"}),s.jsx("dd",{className:"col-sm-8",children:a.job_id}),s.jsx("dt",{className:"col-sm-4",children:"Status"}),s.jsx("dd",{className:"col-sm-8 text-uppercase",children:a.status})]})}),s.jsx("div",{className:"flex-fill ps-4 border-start",children:s.jsxs("dl",{className:"row",children:[s.jsx("dt",{className:"col-sm-4",children:"Client ID"}),s.jsx("dd",{className:"col-sm-8",children:a.client_id}),s.jsx("dt",{className:"col-sm-4",children:"Content ID"}),s.jsx("dd",{className:"col-sm-8",children:a.content_id})]})})]})]}),s.jsxs("div",{className:"card shadow-sm mb-4",style:{borderRadius:"20px"},children:[s.jsx("div",{className:"card-header",children:s.jsx("h5",{className:"mb-0",children:"Timing"})}),s.jsxs("div",{className:"card-body d-flex flex-wrap",children:[s.jsx("div",{className:"flex-fill pe-4",children:s.jsxs("dl",{className:"row",children:[s.jsx("dt",{className:"col-sm-4",children:"Submit time"}),s.jsx("dd",{className:"col-sm-8",children:d(a.created_at).format("YYYY-MM-DD HH:mm:ss")}),s.jsx("dt",{className:"col-sm-4",children:"Updated At"}),s.jsx("dd",{className:"col-sm-8",children:d(a.updated_at).format("YYYY-MM-DD HH:mm:ss")})]})}),s.jsx("div",{className:"flex-fill ps-4 border-start",children:s.jsxs("dl",{className:"row",children:[s.jsx("dt",{className:"col-sm-4",children:"Start time"}),s.jsx("dd",{className:"col-sm-8",children:d(a.created_at).format("YYYY-MM-DD HH:mm:ss")}),s.jsx("dt",{className:"col-sm-4",children:"Processing Duration"}),s.jsx("dd",{className:"col-sm-8",children:b(a.created_at,a.updated_at)})]})})]})]}),s.jsxs("div",{className:"card shadow-sm mb-4",style:{borderRadius:"20px"},children:[s.jsx("div",{className:"card-header",children:s.jsx("h5",{className:"mb-0",children:"Inputs"})}),s.jsx("div",{className:"card-body",children:s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{width:"15%",children:"Input"}),s.jsx("th",{children:"Source"})]})}),s.jsx("tbody",{children:s.jsxs("tr",{children:[s.jsx("td",{children:"1"}),s.jsx("td",{children:a.s3_source})]})})]})})})]}),s.jsxs("div",{className:"card shadow-sm mb-4",style:{borderRadius:"20px"},children:[s.jsx("div",{className:"card-header",children:s.jsx("h5",{className:"mb-0",children:"Outputs"})}),s.jsx("div",{className:"card-body",children:s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{width:"15%",children:"Output"}),s.jsx("th",{children:"Source"})]})}),s.jsx("tbody",{children:s.jsxs("tr",{children:[s.jsx("td",{children:"1"}),s.jsx("td",{children:a.s3_destination})]})})]})})})]})]}):s.jsx("div",{className:"container-fluid py-4",children:"Loading..."})};export{F as default};
